---
phase: 01.1-demo-visual-polish
plan: 03
type: execute
wave: 3
depends_on: ["01.1-01", "01.1-02"]
files_modified:
  - website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.html
  - website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.css
  - website/cultural-map-redesign-stitch-lab/index-maplibre-email-capture.js
  - website/cultural-map-redesign-stitch-lab/index-maplibre-explore-controller.js
  - website/cultural-map-redesign-stitch-lab/index-maplibre-page-effects.js
autonomous: false

must_haves:
  truths:
    - "Footer contains an email capture form with input + submit button and friendly editorial CTA"
    - "Email submissions are sent to a Google Sheet via Apps Script webhook"
    - "Community photo grid of 6-8 photos is visible near the footer with '#ExploreNevadaCounty' CTA"
    - "Functional zones (explore directory, events list, search results) have no scroll-reveal animations — they appear instantly"
    - "Section spacing is generous with clear visual breaks between editorial and functional zones"
    - "Committee member loading the URL sees a polished tourism platform"
  artifacts:
    - path: "website/cultural-map-redesign-stitch-lab/index-maplibre-email-capture.js"
      provides: "Email form validation and Google Sheet submission via Apps Script"
      contains: "CulturalMapEmailCapture"
    - path: "website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.html"
      provides: "Email capture section, community photo grid section in footer area"
      contains: "email-capture"
    - path: "website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.css"
      provides: "Email capture styles, photo grid styles, updated section spacing"
      contains: "email-capture"
  key_links:
    - from: "email form submit"
      to: "Google Apps Script webhook"
      via: "fetch POST to Apps Script URL"
      pattern: "script.google.com|macros"
    - from: "index-maplibre-page-effects.js"
      to: "functional zone elements"
      via: "IntersectionObserver exclusion for .explore-section, .map-events"
      pattern: "explore-section|map-events"
---

<objective>
Footer features, animation cleanup, and layout polish — the table stakes and final touches.

Purpose: Add the email capture and community photo grid that every competitor has, remove distracting animations from functional zones, and do a spacing audit. Then verify the full page looks like a real tourism platform.

Output: Email capture form + photo grid + cleaned animations + polished spacing + visual verification
</objective>

<execution_context>
@C:/Users/ender/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/ender/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/01.1-demo-visual-polish/01.1-CONTEXT.md
@.planning/phases/01.1-demo-visual-polish/01.1-01-SUMMARY.md
@.planning/phases/01.1-demo-visual-polish/01.1-02-SUMMARY.md
@.planning/analysis/PRIORITIZED-ACTION-PLAN.md
@website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.html
@website/cultural-map-redesign-stitch-lab/index-maplibre-explore-controller.js
@website/cultural-map-redesign-stitch-lab/index-maplibre-page-effects.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add email capture form and community photo grid to footer area</name>
  <files>
    website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.html
    website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.css
    website/cultural-map-redesign-stitch-lab/index-maplibre-email-capture.js
  </files>
  <action>
    **HTML — add two new sections BEFORE the `.notes-section`:**

    1. **Community photo grid section:**
       ```html
       <section class="community-photos" aria-label="Community photos">
         <div class="community-photos-inner">
           <h2 class="community-photos-title">Nevada County Through Your Eyes</h2>
           <p class="community-photos-cta">Tag <strong>#ExploreNevadaCounty</strong> on Instagram to be featured</p>
           <div class="community-photos-grid">
             <!-- 6-8 curated photos. Use existing images from mockups/generated/
                  and any images available in the project. For gaps, use credited
                  Unsplash embeds of sierra foothills, historic downtowns, gallery interiors,
                  farm-to-table dining, live music venues, street art/murals.
                  Each photo: -->
             <figure class="community-photo">
               <img src="[source]" alt="[descriptive alt text]" loading="lazy">
               <figcaption class="community-photo-credit">[Location] · Photo: [credit]</figcaption>
             </figure>
             <!-- repeat 6-8 times -->
           </div>
         </div>
       </section>
       ```

    2. **Email capture section:**
       ```html
       <section class="email-capture" aria-label="Newsletter signup">
         <div class="email-capture-inner">
           <h2 class="email-capture-title">Stay in the Loop</h2>
           <p class="email-capture-sub">Weekly updates on events and hidden gems in Nevada County.</p>
           <form class="email-capture-form" id="emailCaptureForm">
             <input type="email" class="email-capture-input" id="emailCaptureInput"
                    placeholder="your@email.com" required aria-label="Email address">
             <button type="submit" class="email-capture-btn">Subscribe</button>
           </form>
           <div class="email-capture-status" id="emailCaptureStatus" hidden></div>
           <p class="email-capture-privacy">No spam. Unsubscribe anytime. We respect your inbox.</p>
         </div>
       </section>
       ```

    **CSS:**
    1. `.community-photos` — background: #faf8f4 (slightly warm off-white), padding: 4rem 2rem.
    2. `.community-photos-title` — Playfair Display 700, 1.8rem, centered, margin-bottom: 0.5rem.
    3. `.community-photos-cta` — DM Sans 400, 1rem, centered, color: #666, margin-bottom: 2rem.
    4. `.community-photos-grid` — display: grid, grid-template-columns: repeat(4, 1fr) on desktop, repeat(2, 1fr) on mobile. Gap: 8px. Max-width: 1200px, margin: auto.
    5. `.community-photo img` — width: 100%, aspect-ratio: 1, object-fit: cover, border-radius: 6px.
    6. `.community-photo-credit` — font-size: 0.7rem, color: #999, padding: 4px 0, DM Sans.
    7. `.community-photo:hover img` — transform: scale(1.03), transition 0.3s. Show credit on hover (hidden by default on desktop, always visible on mobile).
    8. `.email-capture` — background: ink (#1a1612), color: cream (#f5f0e8), padding: 4rem 2rem, text-align: center.
    9. `.email-capture-title` — Playfair Display 700, 2rem, color: cream.
    10. `.email-capture-sub` — DM Sans 400, 1.1rem, color: #ccc, margin: 0.5rem 0 1.5rem.
    11. `.email-capture-form` — display: flex, max-width: 480px, margin: auto, gap: 0.
    12. `.email-capture-input` — flex: 1, padding: 14px 18px, border: none, border-radius: 6px 0 0 6px, font-size: 1rem, DM Sans.
    13. `.email-capture-btn` — background: gold (#c8943e), color: white, padding: 14px 24px, border: none, border-radius: 0 6px 6px 0, font-weight: 600, cursor: pointer, DM Sans. Hover: background: #b5842f.
    14. `.email-capture-status` — margin-top: 1rem, font-size: 0.9rem. Success: color green. Error: color #ff6b6b.
    15. `.email-capture-privacy` — font-size: 0.75rem, color: #888, margin-top: 1rem.
    16. Mobile: `.email-capture-form` stacks vertically (flex-direction: column), input full width, button full width with border-radius: 6px.

    **JS — new file `index-maplibre-email-capture.js`:**
    Create an IIFE exposing `window.CulturalMapEmailCapture`:
    1. `init()` — attach submit handler to `#emailCaptureForm`.
    2. On submit:
       - Prevent default
       - Validate email format (basic regex)
       - Show loading state on button ("Subscribing...")
       - POST to Google Apps Script URL via fetch:
         ```js
         fetch('APPS_SCRIPT_URL', {
           method: 'POST',
           mode: 'no-cors',
           headers: {'Content-Type': 'application/json'},
           body: JSON.stringify({email: inputValue, timestamp: new Date().toISOString()})
         })
         ```
       - On success (no-cors means we assume success after fetch completes): show "You're in! Welcome to the loop." in status div, disable form.
       - On error: show "Something went wrong. Try again?" in status div.
    3. The Apps Script URL should be stored in a constant at the top of the file. For now use a placeholder: `'https://script.google.com/macros/s/PLACEHOLDER/exec'`. Add a comment: `// TODO: Replace with actual Apps Script deployment URL before demo`.
    4. Add `<script src="index-maplibre-email-capture.js"></script>` to the HTML before the main init script, and call `CulturalMapEmailCapture.init()` from bindings or inline.

    **Important photo sourcing note per user decision:** Never download and re-host someone else's photos. For the demo, use:
    - Images already in the project (`mockups/generated/`, `image_data.json`)
    - Properly licensed placeholder images with attribution
    - AI-generated images if needed to fill gaps
  </action>
  <verify>
    1. Scroll to footer area — community photo grid visible with 6-8 images in a grid
    2. Photos have hover effect (slight zoom, credit appears)
    3. Email capture section visible below photos with dark background
    4. Enter a valid email, click Subscribe — button shows "Subscribing...", then success message appears
    5. Enter invalid email — browser validation prevents submit
    6. Mobile: photo grid shows 2 columns, email form stacks vertically
    7. No console errors
  </verify>
  <done>Community photo grid shows 6-8 images with hover credits and #ExploreNevadaCounty CTA; email capture form validates and submits to Apps Script endpoint with success/error states; both sections responsive</done>
</task>

<task type="auto">
  <name>Task 2: Remove animations from functional zones and do spacing audit</name>
  <files>
    website/cultural-map-redesign-stitch-lab/index-maplibre-page-effects.js
    website/cultural-map-redesign-stitch-lab/index-maplibre-explore-controller.js
    website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.css
  </files>
  <action>
    **Remove animations from functional zones (page-effects.js):**
    1. Read `index-maplibre-page-effects.js` to understand how scroll-reveal animations work. Look for IntersectionObserver setup and which elements get the `.reveal` class or GSAP stagger animations.
    2. Exclude functional zone elements from scroll-reveal:
       - `.explore-section` and its children (directory cards, search results)
       - `.map-events` and its children (event cards, event list)
       - `.map-addons` (corridors, experiences lists)
       - `.itinerary-hero-section` (itinerary cards should appear instantly)
    3. Implementation: Either add these to an exclusion list in the IntersectionObserver setup, or remove the `.reveal` class from their HTML elements, or add a `.no-reveal` class that opts out.
    4. Keep animations on editorial zones: `.cover-grid`, `.muse-section`, `.community-photos` (these benefit from scroll-reveal).

    **Remove stagger animation from explore list (explore-controller.js):**
    1. Find the GSAP stagger animation that animates explore list items flowing in (around line 172-175 per the action plan).
    2. Remove or disable it. Explore results should appear instantly when a category is selected or search is performed.
    3. If there's a GSAP timeline or fromTo animation on `.explore-list` children, replace it with a simple immediate render (just set opacity:1, transform:none).

    **Spacing audit (CSS):**
    1. Increase margin/padding between major page sections:
       - Between `.cover-grid` and `.itinerary-hero-section`: at least 3rem
       - Between `.itinerary-hero-section` and `.split-layout`: at least 3rem
       - Between `.muse-section` and `.explore-section`: at least 4rem
       - Between `.explore-section` and `.community-photos`: at least 4rem
    2. Add clear visual breaks between editorial and functional zones:
       - A thin horizontal rule or background color change between `.muse-section` and `.explore-section`
       - A thin horizontal rule or background color change between `.explore-section` and `.community-photos`
    3. Ensure "featured" content shows 3-5 items prominently (not a wall of 12):
       - Check if the Picks tab in discovery shows too many items. If so, limit initial render to 5 items with a "See all" link.
       - Check if MUSE cards grid is too dense. If 4 cards feel crammed, increase gap and card max-width.
    4. Verify whitespace on mobile (375px): sections should have at least 1.5rem side padding, text should breathe.
  </action>
  <verify>
    1. Select a category in the explore directory — results appear INSTANTLY (no stagger/fade-in)
    2. Event cards in the events section appear instantly on filter change
    3. Scroll through the page — editorial sections (hero, MUSE) still have smooth reveal animations
    4. Functional sections (explore, events, map addons) are visible immediately when scrolled into view
    5. Clear visual separation between sections (generous spacing, subtle dividers)
    6. Page doesn't feel cramped — whitespace between sections is generous
    7. Mobile: adequate padding, no cramped text
  </verify>
  <done>Functional zones (explore, events, map addons) have no scroll-reveal or stagger animations; editorial zones retain animations; section spacing is generous with clear visual breaks; page feels spacious and professional</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Full-page visual verification for committee demo readiness</name>
  <files>website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.html</files>
  <action>
    Deploy to stitch-lab Vercel: `cd website/cultural-map-redesign-stitch-lab && vercel --prod`

    Then verify the complete Phase 01.1 visual polish:
    - Photo carousel with 8-10 rotating images at top
    - Branded hero section (~50vh) with SVG logo + "Explore Nevada County" + blurred background
    - Sticky top bar: brand mark + 4 nav links (desktop) + expandable search + hamburger
    - Hamburger slides from left with progressive disclosure
    - AI Concierge style cards (4-6) inside chat panel
    - Restyled gold/cream chat FAB
    - Clickable place names in MUSE articles that trigger map zoom + detail panel
    - Email capture form in footer with Apps Script backend
    - Community photo grid with #ExploreNevadaCounty CTA
    - Animations removed from functional zones
    - Generous spacing between sections

    Verification checklist:
    1. First impression test: Does the page look like a tourism platform? Magazine cover feel?
    2. Photo carousel: Auto-rotates? Swipeable?
    3. Hero: Brand mark legible? Background blurred behind text?
    4. Top bar: Sticky? Desktop shows nav links? Mobile collapses to hamburger?
    5. Search: Icon expands to field on click?
    6. Hamburger: Slides from left? Categories collapsible?
    7. Map: Click "Map" in nav — scrolls to map section?
    8. AI Concierge: Click FAB → style cards visible → click a card → prompt submits → response streams → click venue name → map zooms?
    9. MUSE articles: Bold gold-underlined place names → click one → map zooms + detail panel opens?
    10. Community photos: Grid visible? Hover shows credit?
    11. Email capture: Dark section, enter email, "Subscribe" button works?
    12. Spacing: Generous whitespace between sections? No cramped areas?
    13. Mobile (375px): Everything functional? No horizontal scroll? Hamburger works?
    14. No console errors?
  </action>
  <verify>Human reviews deployed site and confirms visual quality meets committee demo standard</verify>
  <done>Human approves the full page as committee-demo-ready, or provides list of issues to fix</done>
</task>

</tasks>

<verification>
1. Full page loads without errors on stitch-lab Vercel URL
2. Photo carousel rotates and is swipeable
3. Hero brand mark is legible over blurred background
4. Top bar is sticky with hybrid nav on desktop, hamburger on mobile
5. Chat FAB opens to style cards, clicking a card triggers full AI demo flow
6. MUSE place names are clickable and trigger map zoom
7. Email capture form submits successfully
8. Community photo grid displays with credits
9. Functional zones have no scroll-reveal animations
10. Page spacing is generous and professional
11. Mobile layout works at 375px without issues
</verification>

<success_criteria>
A committee member can load the URL on Wednesday and immediately understand this is a polished tourism platform. The AI Concierge demo works end-to-end. Email capture exists. The page looks like it belongs alongside Visit Savannah or AFAR, not like a government prototype.
</success_criteria>

<output>
After completion, create `.planning/phases/01.1-demo-visual-polish/01.1-03-SUMMARY.md`
</output>
