---
phase: 01.1-demo-visual-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.html
  - website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.css
  - website/cultural-map-redesign-stitch-lab/index-maplibre-photo-carousel.js
autonomous: true

must_haves:
  truths:
    - "Hero section displays a photo carousel with 8-10 diverse Nevada County images that auto-rotate and are swipeable"
    - "Below the carousel, a ~50vh hero area shows 'Explore Nevada County' in Playfair Display with an SVG brand mark, over a softly blurred background image"
    - "Desktop top bar shows brand mark left, expandable search icon, 4 inline nav links (Events, Itineraries, Map, MUSE), and hamburger right"
    - "Mobile top bar shows brand mark left, search icon, and hamburger right"
    - "Hamburger menu slides from LEFT with content-adaptive width, containing all nav items with progressive disclosure (categories collapsible)"
    - "Clicking 'Map' from top bar expands map to full prominence"
  artifacts:
    - path: "website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.html"
      provides: "Photo carousel markup, restructured hero section, restructured mast/top-bar with hybrid nav, hamburger overlay"
      contains: "photo-carousel"
    - path: "website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.css"
      provides: "Carousel styles, hero brand mark styles, top bar hybrid nav styles, hamburger overlay styles, search expand animation"
      contains: "photo-carousel"
    - path: "website/cultural-map-redesign-stitch-lab/index-maplibre-photo-carousel.js"
      provides: "Auto-rotate carousel with swipe support, expandable search, hamburger toggle, Map nav click handler"
      contains: "CulturalMapPhotoCarousel"
  key_links:
    - from: "index-maplibre-photo-carousel.js"
      to: "index-maplibre-hero-intent-stitch-frontend-design-pass.html"
      via: "DOM IDs for carousel container, search input, hamburger toggle, nav links"
      pattern: "getElementById.*carousel"
    - from: "hamburger Map link"
      to: "map-column"
      via: "scrollIntoView or classList toggle to expand map"
      pattern: "mapSection|map-column"
---

<objective>
Hero visual overhaul and clean top bar — the first two things the committee sees.

Purpose: Replace the current text-heavy header with a magazine-cover hero and restructure navigation for clean editorial presentation. This is the single biggest visual impact change for the demo.

Output: Photo carousel + branded hero section + hybrid navigation top bar + hamburger menu + expandable search
</objective>

<execution_context>
@C:/Users/ender/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/ender/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/01.1-demo-visual-polish/01.1-CONTEXT.md
@.planning/phases/01.1-demo-visual-polish/01.1-RESEARCH.md
@.planning/DESIGN-SPEC.md
@.planning/analysis/PRIORITIZED-ACTION-PLAN.md
@website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.html
@website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build photo carousel and branded hero section</name>
  <files>
    website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.html
    website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.css
    website/cultural-map-redesign-stitch-lab/index-maplibre-photo-carousel.js
  </files>
  <action>
    **HTML changes (entry point):**
    1. Add a `<section class="photo-carousel">` ABOVE the existing cover-grid section. Contains 8-10 `<img>` elements showing diverse Nevada County shots (downtown streetscapes, galleries, food/dining, art installations, nightlife, nature views, people at cultural events). Use existing images from `mockups/generated/` and `image_data.json` where available. For missing subjects, use placeholder Unsplash URLs with Nevada County-adjacent content (sierra foothills, historic downtowns, galleries).
    2. Replace the current `.cover` article content. Remove the `.stitch-collage` div. Replace with:
       - A single hero background image (one of the stronger Nevada County photos) with CSS `filter: blur(3px)` behind the brand area
       - Centered brand lockup: `<div class="hero-brand">` containing:
         - An inline SVG logo/badge (geometric/minimal — mountain silhouette + arts motif, works at 40px and 200px). Use `<svg>` directly in HTML. Keep it simple: 2-3 shapes, the design palette colors (gold #c8943e, ink #1a1612, cream #f5f0e8).
         - `<h1 class="hero-title">Explore Nevada County</h1>` in Playfair Display 900 weight
         - `<p class="hero-subtitle">Nevada County Cultural District</p>` in DM Sans
         - `<p class="hero-geo">Grass Valley · Nevada City · Truckee · the Sierra foothills</p>`
       - Keep existing `.cover-tag`, `.cover-headline`, `.cover-subline`, `.cover-geo-context` classes or replace them — just ensure the brand lockup is centered and readable.
    3. Hero section should be approximately `50vh` height (per user decision). Use `min-height: 50vh` so content doesn't overflow on small screens.
    4. Add `<script src="index-maplibre-photo-carousel.js"></script>` before `index-maplibre.js` in the script load order.

    **CSS changes:**
    1. `.photo-carousel` — full-width horizontal strip, ~200px tall on desktop, ~140px on mobile. Overflow hidden. Images fill-cover, auto-sized.
    2. `.photo-carousel img` — object-fit: cover, fixed height, inline-block or flex items. Transition for smooth slide.
    3. `.hero-brand` — centered text, `position: relative` over the blurred background. White or cream text with text-shadow for legibility.
    4. `.hero-title` — Playfair Display, 3.5rem desktop / 2rem mobile, font-weight 900, letter-spacing tight.
    5. Hero background: `background-size: cover; background-position: center;` with a pseudo-element or wrapper div applying `filter: blur(3px); opacity: 0.7` so the brand mark pops.
    6. SVG logo: `width: 80px` desktop, `width: 50px` mobile. Centered above the title.

    **JS (new file `index-maplibre-photo-carousel.js`):**
    Create an IIFE exposing `window.CulturalMapPhotoCarousel`:
    1. `init()` — called from HTML or bindings. Finds `.photo-carousel`, sets up:
       - Auto-rotate every 5 seconds (configurable via `data-interval` attribute)
       - CSS transform translateX-based sliding (smooth, GPU-accelerated)
       - Touch/swipe support: track touchstart/touchmove/touchend, threshold 50px
       - Pause auto-rotate on hover (desktop) or touch (mobile)
       - Loop back to first image after last
    2. No external dependencies. Pure vanilla JS.
    3. Accessible: `aria-live="polite"` on the carousel region, `aria-roledescription="carousel"`.
  </action>
  <verify>
    Open the entry point HTML in a browser. Verify:
    1. Photo carousel displays across the top and auto-rotates
    2. Swiping/dragging advances the carousel
    3. Hero section below carousel shows brand lockup with SVG logo, title, subtitle
    4. Hero background is blurred behind the text
    5. Hero is approximately 50vh tall
    6. No JS errors in console
  </verify>
  <done>Photo carousel auto-rotates through 8-10 images, hero section displays brand lockup with SVG logo over blurred background at ~50vh height, touch/swipe works</done>
</task>

<task type="auto">
  <name>Task 2: Restructure top bar with hybrid navigation, search, and hamburger</name>
  <files>
    website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.html
    website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.css
    website/cultural-map-redesign-stitch-lab/index-maplibre-photo-carousel.js
  </files>
  <action>
    **HTML changes to `.mast` header:**
    1. Replace the current mast structure. New structure:
       ```
       <header class="mast" role="banner">
         <div class="mast-inner">
           <a href="#" class="mast-brand">Explore Nevada County</a>
           <nav class="mast-nav-desktop" aria-label="Primary">
             <a href="events.html">Events</a>
             <a href="itineraries.html">Itineraries</a>
             <a href="#mapSection" data-nav-action="expand-map">Map</a>
             <a href="#muse">MUSE</a>
           </nav>
           <div class="mast-actions">
             <button class="mast-search-toggle" type="button" aria-label="Search" aria-expanded="false">
               <!-- SVG magnifying glass icon -->
             </button>
             <div class="mast-search-field" hidden>
               <input type="search" placeholder="Search places, events..." aria-label="Search">
               <button type="button" class="mast-search-close" aria-label="Close search">&times;</button>
             </div>
             <button class="mast-hamburger" type="button" aria-label="Open menu" aria-expanded="false" aria-controls="hamburgerOverlay">
               <!-- 3-line hamburger SVG -->
             </button>
           </div>
         </div>
       </header>
       ```
    2. Remove the `.edition` div from the mast (move edition info elsewhere or drop it).
    3. Remove `.stitch-top-nav` (replaced by `.mast-nav-desktop`).
    4. Add hamburger overlay after the mast:
       ```
       <div class="hamburger-overlay" id="hamburgerOverlay" hidden>
         <div class="hamburger-panel">
           <button class="hamburger-close" type="button" aria-label="Close menu">&times;</button>
           <nav class="hamburger-nav" aria-label="Full navigation">
             <a href="events.html">Events</a>
             <a href="itineraries.html">Itineraries</a>
             <a href="#mapSection" data-nav-action="expand-map">Map</a>
             <a href="#muse">MUSE</a>
             <details class="hamburger-section">
               <summary>Categories</summary>
               <div class="hamburger-categories" id="hamburgerCategoryGrid"></div>
             </details>
             <details class="hamburger-section">
               <summary>Experiences & Routes</summary>
               <div class="hamburger-experiences" id="hamburgerExperiences"></div>
             </details>
             <a href="#exploreSection">Directory</a>
           </nav>
         </div>
       </div>
       ```

    **CSS changes:**
    1. `.mast` — position: sticky, top: 0, z-index: 1000. Background: cream or white with subtle border-bottom. Height: ~56px.
    2. `.mast-inner` — flex, align-items center, justify-content space-between, max-width: 1400px, margin: auto.
    3. `.mast-brand` — Playfair Display, font-weight 700, font-size 1.1rem, color ink, text-decoration none.
    4. `.mast-nav-desktop` — flex, gap: 1.5rem. Links: DM Sans 500, 0.85rem, uppercase, letter-spacing 0.05em. Hidden below 900px breakpoint.
    5. `.mast-nav-desktop a[data-nav-action="expand-map"]` — special styling (bold or gold accent) to signal it's interactive.
    6. `.mast-search-toggle` — 24px icon, no border, cursor pointer. On click: hides toggle, shows `.mast-search-field` with width animation (expand from icon position).
    7. `.mast-search-field` — flex, input expands to ~300px with transition. Focus auto-applied to input when revealed.
    8. `.mast-hamburger` — 24px icon, visible always. On mobile, this is the primary nav.
    9. `.hamburger-overlay` — position: fixed, inset: 0, z-index: 2000, background: rgba(0,0,0,0.5). Flex, align items stretch.
    10. `.hamburger-panel` — slides from LEFT (not right). Width: auto (content-adaptive), max-width: 85vw, min-width: 280px. Background: cream. Padding: 2rem. Transition: transform 0.3s ease.
    11. `.hamburger-section summary` — DM Sans 500, cursor pointer, padding 0.75rem 0, border-bottom: 1px solid #e0ddd5.
    12. Mobile (< 900px): `.mast-nav-desktop` hidden. `.mast-brand` smaller font. `.mast-hamburger` visible (it's always visible).

    **JS additions (add to index-maplibre-photo-carousel.js or the same IIFE):**
    1. Search toggle: click `.mast-search-toggle` → show `.mast-search-field`, focus input, set aria-expanded="true". Close button reverses.
    2. Hamburger toggle: click `.mast-hamburger` → remove hidden from `#hamburgerOverlay`, add open class to `.hamburger-panel`, set aria-expanded="true". Close button or overlay click reverses. Trap focus inside hamburger while open.
    3. Map nav action: any `[data-nav-action="expand-map"]` click → scroll to #mapSection, close hamburger if open, optionally add a `.map-expanded` class to `.map-column` to make it more prominent (full width, larger height).
    4. Populate `#hamburgerCategoryGrid` by cloning the existing `#categoryGrid` content on hamburger open (reuse existing category data).
    5. ESC key closes hamburger and search.
  </action>
  <verify>
    Open the page and verify:
    1. Desktop (>900px): Top bar shows brand left, 4 nav links center, search + hamburger right
    2. Mobile (<900px): Top bar shows brand left, search + hamburger right, nav links hidden
    3. Clicking search icon expands search field with animation
    4. Clicking hamburger opens left-sliding overlay with all nav items
    5. Categories in hamburger are collapsible
    6. Clicking "Map" scrolls to map section
    7. ESC closes hamburger and search
    8. Top bar stays sticky on scroll
  </verify>
  <done>Desktop shows 4 inline nav links + search + hamburger; mobile shows search + hamburger only; hamburger slides from left with progressive disclosure; search expands on click; Map link scrolls to map; top bar is sticky</done>
</task>

</tasks>

<verification>
1. Load the entry point URL in desktop browser (>900px width): photo carousel visible at top, hero brand lockup below, sticky top bar with inline nav
2. Resize to mobile (375px): carousel adapts, hero brand scales down, top bar shows brand + search + hamburger only
3. Auto-rotate works on carousel (wait 5+ seconds)
4. Swipe/drag advances carousel
5. Search icon expands to search field
6. Hamburger opens from left, shows all nav with collapsible categories
7. Click "Map" in nav or hamburger — scrolls to map section
8. No console errors
9. All existing functionality (discovery tabs, events, explore) still works
</verification>

<success_criteria>
Hero reads as magazine cover with rotating photos and branded overlay. Navigation is clean and professional with hybrid desktop/mobile patterns. Committee's first impression matches a real tourism publication.
</success_criteria>

<output>
After completion, create `.planning/phases/01.1-demo-visual-polish/01.1-01-SUMMARY.md`
</output>
