---
status: diagnosed
phase: 02.2-live-music-venue-event-ingestion
source: 02.2-01-SUMMARY.md, 02.2-02-SUMMARY.md, 02.2-03-SUMMARY.md
started: 2026-02-16T00:00:00Z
updated: 2026-02-16T23:30:00Z
---

## Current Test

[testing complete]

## Tests

### 1. New Venues Visible on Map
expected: Searching or browsing the map shows Bodhi Hive, The Fern, Stardust Station, and The Unchurch as markers/entries in the directory. Bodhi Hive/Stardust Station/The Unchurch categorized as Performing Arts, The Fern as Eat, Drink & Stay.
result: issue
reported: "All 4 venues are in data.json and render as map markers (confirmed via queryRenderedFeatures). Categories correct: Bodhi Hive/Stardust/Unchurch = Performing Arts, The Fern = Eat, Drink & Stay. However: Performing Arts venues render with grey #999 color instead of a category color because the config category list uses 'Performance Spaces' not 'Performing Arts' — category name mismatch between data.json and config.js"
severity: minor

### 2. Ol' Republic Removed
expected: Searching for "Ol' Republic" in the directory returns no results. No markers for Ol' Republic Brewery or Ol' Republic Roadhouse on the map.
result: pass

### 3. Crazy Horse Events Appear
expected: Events from Crazy Horse Saloon & Grill appear in the events section with source badge indicating the source. At least some upcoming events visible.
result: pass

### 4. Golden Era Events Appear
expected: Events from Golden Era Lounge appear in the events section with source badge. At least some upcoming events visible.
result: issue
reported: "Golden Era has 6 events in events-merged-flat.json (confirmed: DOMINIC STEPANIAN, MOM & DOM, JOHN VOELZ etc with venue_name=Golden Era Lounge). But source filter 'source:goldenera' shows 0 events because their source_type is 'squarespace' not 'goldenera'. The events model filters by source_type field which doesn't match the dropdown value. The Squarespace ingest script sets a generic source_type instead of a venue-specific one."
severity: major

### 5. Event Tag Filter - Live Music
expected: Events dropdown includes a "By Type" section with "Live Music" option. Selecting it filters the event list to show only events tagged as live-music. Scope label shows "Live Music" (not "tag:live-music").
result: pass

### 6. Event Source Filter
expected: Events dropdown includes a "By Source" section with individual source options (e.g., KVMR, GVDA, Crazy Horse). Selecting one filters events to that source only. Scope label shows human-readable source name.
result: issue
reported: "Crazy Horse source filter works correctly (9 events, scope label shows 'Source: Crazy Horse'). Golden Era source filter shows 0 events — same root cause as Test 4: source_type mismatch. Bodhi Hive would have same issue (0 events currently anyway). The dropdown UI with optgroups and human-readable labels works correctly."
severity: major

### 7. Submit Event Page Loads
expected: Navigating to submit-event.html shows an editorial-styled event submission page with a Google Form embed or placeholder for community event submissions.
result: pass

### 8. Event Tags in Data
expected: Events in the merged events feed include event_tags arrays (e.g., ["live-music"]) on venue-sourced events. Tag data is present and drives the filter system.
result: pass

## Summary

total: 8
passed: 5
issues: 3
pending: 0
skipped: 0

## Gaps

- truth: "New venues render with correct category color on map"
  status: failed
  reason: "Agent verified: Performing Arts venues render with grey #999 fallback color because config uses 'Performance Spaces' not 'Performing Arts' as category name"
  severity: minor
  test: 1
  root_cause: "3 venues in data.json use category 'Performing Arts' but config CATS object only defines 'Performance Spaces' — color lookup falls back to grey #999"
  artifacts:
    - path: "website/cultural-map-redesign-stitch-lab/data.json"
      issue: "Bodhi Hive, Stardust Station, The Unchurch have l='Performing Arts' instead of 'Performance Spaces'"
  missing:
    - "Change category from 'Performing Arts' to 'Performance Spaces' for 3 venues in data.json"
  debug_session: ".planning/debug/performing-arts-grey-color.md"

- truth: "Golden Era source filter shows Golden Era events"
  status: failed
  reason: "Agent verified: source:goldenera filter returns 0 events because Golden Era events have source_type='squarespace' not 'goldenera'. Squarespace ingest script uses generic source_type instead of venue-specific identifier."
  severity: major
  test: 4
  root_cause: "ingest_squarespace_events.py line 167 hardcodes source_type='squarespace' instead of using the --source-name parameter value"
  artifacts:
    - path: "scripts/events/ingest_squarespace_events.py"
      issue: "Line 167: hardcoded 'source_type': 'squarespace' should be 'source_type': source_name"
  missing:
    - "Change line 167 from source_type='squarespace' to source_type=source_name"
    - "Re-run merge pipeline to regenerate events-merged-flat.json with correct source_type values"
  debug_session: ""

- truth: "All source filters correctly isolate their source's events"
  status: failed
  reason: "Agent verified: Crazy Horse filter works (source_type='crazyhorse'). Golden Era filter broken (source_type='squarespace' not 'goldenera'). Bodhi Hive would have same issue. Root cause is Squarespace ingest script setting generic source_type."
  severity: major
  test: 6
  root_cause: "Same as test 4 — ingest_squarespace_events.py hardcodes source_type instead of using parameterized source_name"
  artifacts:
    - path: "scripts/events/ingest_squarespace_events.py"
      issue: "Line 167: source_type not parameterized"
  missing:
    - "Same fix as test 4 — single root cause"
  debug_session: ""
