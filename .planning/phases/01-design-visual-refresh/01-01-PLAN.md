---
phase: 01-design-visual-refresh
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - website/cultural-map-redesign/index-maplibre.css
  - website/cultural-map-redesign/index-maplibre-config.js
  - docs/brand-guide.md
autonomous: true

must_haves:
  truths:
    - "Background color is clean near-white (#FAFAF8 or similar), not warm parchment (#F4EFE6)"
    - "Shadows are subtle flat editorial shadows, not dual-direction neumorphic embossing"
    - "Primary text color achieves 4.5:1+ contrast ratio on the new background"
    - "Card token variables (--card-radius, --card-shadow, etc.) exist at :root level"
    - "Category colors in CSS custom properties match the CATS object hex values in config.js"
  artifacts:
    - path: "website/cultural-map-redesign/index-maplibre.css"
      provides: "Updated :root design tokens (palette, shadows, card tokens)"
      contains: "--card-radius"
    - path: "website/cultural-map-redesign/index-maplibre-config.js"
      provides: "Category colors matching CSS custom properties"
      contains: "CATS"
    - path: "docs/brand-guide.md"
      provides: "Updated visual direction documentation"
      contains: "Editorial"
  key_links:
    - from: "index-maplibre.css :root"
      to: "all components using --shadow-raised, --shadow-inset, --shadow-soft"
      via: "CSS custom property cascade"
      pattern: "var\\(--shadow-"
    - from: "index-maplibre-config.js CATS colors"
      to: "index-maplibre.css --cat-* variables"
      via: "dual source of truth"
      pattern: "--cat-landmarks"
---

<objective>
Replace the Heritage Neumorphism design token foundation with a MUSE-inspired editorial aesthetic. Update the :root CSS custom properties (palette, shadows, card tokens), synchronize category colors between CSS and JS, and document the new visual direction in the brand guide.

Purpose: Every visual element on the site inherits from :root tokens. Updating the foundation here cascades clean editorial styling everywhere without touching individual component CSS. This is the single highest-leverage change in the entire phase.

Output: Updated :root block in index-maplibre.css, matching CATS colors in config.js, updated brand-guide.md
</objective>

<execution_context>
@C:/Users/ender/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/ender/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-design-visual-refresh/01-RESEARCH.md
@website/cultural-map-redesign/index-maplibre.css (lines 1-41 — current :root block)
@website/cultural-map-redesign/index-maplibre-config.js (CATS object)
@docs/brand-guide.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace :root design tokens — palette, shadows, and new card tokens</name>
  <files>website/cultural-map-redesign/index-maplibre.css</files>
  <action>
Edit the :root block (lines 1-41) in index-maplibre.css. Replace all values in place — do NOT rename variable names (36+ JS modules reference them).

**Palette replacement:**
```css
--neuro-bg: #FAFAF8;           /* clean near-white (was warm parchment #F4EFE6) */
--neuro-light: rgba(255,255,255,0.9);  /* updated for new bg */
--neuro-dark: rgba(0,0,0,0.06);        /* neutral dark (was brown-tinted) */
--ink: #1a1612;                /* true dark for strong contrast (was #4A6B7C) */
--cream: #FAFAF8;              /* matches bg (was #F4EFE6) */
--parchment: #F2F0EC;          /* subtle off-white for depth (was #E8DFD0) */
--gold: #c8943e;               /* slightly muted gold (was #D4AF37) */
--gold-bright: #d9a84e;        /* hover gold */
--rust: #a0522d;               /* earthy warm (was #B85C38) */
--deep-green: #4a7a5c;         /* slightly brighter green */
--slate: #6b6560;              /* warm neutral gray (was #A89070) */
--red-accent: #c0392b;         /* brighter terracotta */
--blue-wash: #5ba4cf;          /* deeper sky blue */
```

**Shadow replacement (redefine, do not rename):**
```css
--shadow-raised: 0 2px 8px rgba(0,0,0,0.08), 0 1px 2px rgba(0,0,0,0.06);
--shadow-inset: 0 1px 2px rgba(0,0,0,0.04) inset;
--shadow-soft: 0 1px 4px rgba(0,0,0,0.05);
```

**New card tokens (ADD after shadow variables):**
```css
--card-bg: rgba(255, 255, 255, 0.85);
--card-border: 1px solid rgba(26, 22, 18, 0.08);
--card-radius: 12px;
--card-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
--card-shadow-hover: 0 8px 24px rgba(0, 0, 0, 0.10);
--card-transition: all 0.25s cubic-bezier(0.22, 1, 0.36, 1);
```

**Category colors (brighten and modernize):**
```css
--cat-landmarks: #c0392b;       /* bold red */
--cat-eat: #d4a017;             /* warm gold */
--cat-arts: #27ae60;            /* bright green */
--cat-cultural: #2980b9;        /* strong blue */
--cat-fairs: #e67e22;           /* vivid orange */
--cat-galleries: #8e44ad;       /* rich purple */
--cat-walks: #16a085;           /* teal */
--cat-publicart: #f39c12;       /* amber */
--cat-performance: #3498db;     /* sky blue */
--cat-preservation: #7f6b52;    /* warm brown (heritage) */
```

Keep the font-family variables unchanged (Playfair Display, DM Sans, JetBrains Mono — already confirmed by stakeholder).

Also update the `body` selector (immediately after :root) to use the new background:
- `background: var(--neuro-bg)` or `background: var(--cream)` — whichever is currently used, keep using that variable name but the value will cascade from :root.
- `color: var(--ink)` — if not already using this variable, switch to it.

**Verify contrast:** --ink (#1a1612) on --cream (#FAFAF8) = ~16:1 contrast (excellent). --slate (#6b6560) on --cream (#FAFAF8) = ~4.8:1 (passes AA for normal text).
  </action>
  <verify>
Open index-maplibre.css and confirm:
1. :root block contains new palette values (grep for #FAFAF8, #1a1612)
2. Shadow variables are redefined (grep for "rgba(0,0,0" in shadow vars — should be neutral, not brown)
3. Card tokens exist (grep for --card-radius)
4. No variable names were changed (grep for --shadow-raised, --neuro-bg — names still present)
5. No duplicate :root blocks created
  </verify>
  <done>
The :root block has clean editorial palette (#FAFAF8 background, #1a1612 text, neutral shadows), card tokens are defined, and all variable names are preserved for backward compatibility with 36+ JS modules.
  </done>
</task>

<task type="auto">
  <name>Task 2: Synchronize category colors in JS config and update brand guide</name>
  <files>website/cultural-map-redesign/index-maplibre-config.js, docs/brand-guide.md</files>
  <action>
**Part A: Update index-maplibre-config.js**

Find the CATS object and update each category's `color` property to match the new CSS values exactly:

| Category | New Color |
|----------|-----------|
| Historic Landmarks | #c0392b |
| Eat/Drink/Stay | #d4a017 |
| Cultural Organizations | #27ae60 → wait, need to check actual key names |

Read the CATS object first to get exact key names, then update each `color:` value to match the CSS --cat-* values from Task 1. The hex values in JS MUST exactly match the CSS custom property values.

**Part B: Update docs/brand-guide.md**

Read the current brand guide, then make these updates:
1. Replace "Heritage Neumorphism" naming with "MUSE Editorial" or "Editorial" throughout
2. Update the color palette section with new hex values
3. Update the shadow system description (flat editorial, not neumorphic)
4. Add the card token system documentation
5. Update the border-radius guidance: standardize on 12px for cards (matching --card-radius), rounded pills for buttons/tabs
6. Note that watercolor assets are retained as small icons (32px) but removed from decorative backgrounds
7. Keep all existing sections that are still accurate (typography, font stack)

Do NOT change the brand guide file format or remove sections — edit in place.
  </action>
  <verify>
1. In config.js, every CATS entry's `color` value matches the corresponding --cat-* CSS variable value from Task 1
2. Brand guide no longer references "Heritage Neumorphism" as the current direction
3. Brand guide documents the new editorial palette and card token system
4. Brand guide shadow section describes flat editorial shadows, not neumorphic
  </verify>
  <done>
Category colors are synchronized between CSS and JS (dual source of truth is consistent). Brand guide documents the new MUSE Editorial visual direction with updated palette, shadows, card tokens, and border-radius guidance.
  </done>
</task>

</tasks>

<verification>
1. Load the site locally (`python -m http.server 8000` from repo root, navigate to hero-intent variant)
2. Background should be clean near-white, not warm parchment
3. Card elements should show subtle flat shadows, not embossed neumorphic appearance
4. Text should be dark (#1a1612) with high contrast
5. Category pills/markers should show brighter, more saturated colors
6. No broken styles — all elements should still render (variable names unchanged)
</verification>

<success_criteria>
- :root tokens updated with editorial palette, flat shadows, and card tokens
- Category colors match between CSS custom properties and JS CATS object
- Brand guide documents the MUSE Editorial direction
- No JS module breaks (all CSS variable names preserved)
- Contrast ratios meet WCAG AA (4.5:1+ for body text)
</success_criteria>

<output>
After completion, create `.planning/phases/01-design-visual-refresh/01-01-SUMMARY.md`
</output>
