---
phase: 03.1-content-architecture-demo-curation
plan: 02
type: execute
wave: 2
depends_on: ["03.1-01"]
files_modified:
  - website/cultural-map-redesign-stitch-lab/events.html
  - website/cultural-map-redesign-stitch-lab/itineraries.html
  - website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.html
  - website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.css
autonomous: true
must_haves:
  truths:
    - "Navigating to events.html shows a dedicated events page with full calendar-style list view"
    - "Events page has richer filtering than the hub: date range, category dropdown, family toggle, and text search"
    - "Navigating to itineraries.html shows all 3 itineraries side-by-side for comparison"
    - "Each itinerary card on the sub-page links back to the hub with the itinerary deep link (?itinerary=id)"
    - "Hub page nav links to Events and Itineraries sub-pages"
    - "Sub-pages share consistent header/footer styling with the hub"
    - "Sub-pages have a 'Back to hub' link that returns to the main page"
  artifacts:
    - path: "website/cultural-map-redesign-stitch-lab/events.html"
      provides: "Dedicated events page with full calendar view and richer filtering"
    - path: "website/cultural-map-redesign-stitch-lab/itineraries.html"
      provides: "Dedicated itineraries page with side-by-side comparison"
  key_links:
    - from: "events.html"
      to: "events-merged-flat.json"
      via: "fetch() to load event data"
      pattern: "fetch.*events-merged-flat"
    - from: "itineraries.html"
      to: "itineraries.json"
      via: "fetch() to load itinerary data"
      pattern: "fetch.*itineraries"
    - from: "index-maplibre-hero-intent-stitch-frontend-design-pass.html"
      to: "events.html"
      via: "nav link in header"
      pattern: "href.*events\\.html"
---

<objective>
Create two dedicated sub-pages (Events and Itineraries) that provide deeper browsing experiences beyond what the hub offers, and wire navigation links from the hub to sub-pages.

Purpose: The hub page serves as an editorial entry point, but users who want to browse all 176 events or compare all 3 itineraries need dedicated pages. These sub-pages prove the platform has depth beyond the curated demo surface — the committee can see the full event calendar and trip planning capability.

Output: events.html with full calendar list view and rich filtering, itineraries.html with side-by-side comparison, and updated hub navigation.
</objective>

<execution_context>
@C:/Users/ender/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/ender/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03.1-content-architecture-demo-curation/03.1-CONTEXT.md
@.planning/phases/03.1-content-architecture-demo-curation/03.1-01-SUMMARY.md
@website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.html
@website/cultural-map-redesign-stitch-lab/events-merged-flat.json
@website/cultural-map-redesign-stitch-lab/itineraries.json
@website/cultural-map-redesign-stitch-lab/index-maplibre-config.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create dedicated events sub-page with full calendar list view and rich filtering</name>
  <files>
    website/cultural-map-redesign-stitch-lab/events.html
    website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.css
  </files>
  <action>
    **Create `events.html` — a standalone page that loads `events-merged-flat.json` directly and renders all events in a rich, filterable list.**

    This is a SEPARATE HTML file (per user decision: Claude's discretion on routing, and separate HTML fits vanilla JS best). It does NOT load all 40+ modules from the hub. It is a lightweight page with its own inline JS.

    **HTML structure:**
    ```
    header.mast (same styling as hub — copy the mast bar HTML, add "Back to Explore" link)
    main
      h1: "Events Calendar"
      p: "176 events from 5 sources across Nevada County"
      .events-filters
        input[type=text] search box
        .events-date-chips: All | Today | This Weekend | This Week | Next 2 Weeks
        select.events-category-dropdown: All categories + populated from event data
        label+checkbox: Family & Kids only
      .events-list-view
        For each event (grouped by date):
          date-header: "Saturday, February 15, 2026"
          event-row: time | title | venue | city | source badge | family badge (if applicable)
    footer.colophon (matching hub)
    ```

    **Inline JS (inside `<script>` at bottom of events.html):**
    1. Fetch `events-merged-flat.json`
    2. Parse with Luxon for timezone-aware date handling (load Luxon from CDN)
    3. Group events by date (Pacific timezone)
    4. Render grouped list with date headers
    5. Implement filters:
       - Text search: filter title + venue_name + description (case-insensitive)
       - Date chips: All (no filter), Today, This Weekend (Sat+Sun), This Week (Mon-Sun), Next 2 Weeks
       - Category dropdown: populate from unique values in event tags/categories. Since events have `source_label` not categories, use source_label as a filter dimension
       - Family toggle: filter where `is_family === true`
    6. Source badges use same colors as hub picks: KVMR=teal, GVDA=rust, LibCal=blue, Trumba=gold, CivicEngage=green

    **CSS:** Add events page styles to the design-pass CSS file:
    - `.events-page` root class for scoping
    - `.events-date-header`: bold date, underline separator
    - `.events-row`: flexbox row with time, title, venue, city, source badge
    - `.events-row:hover`: subtle highlight
    - `.events-source-badge`: small colored pill (reuse same badge styling from hub)
    - `.events-family-badge`: small icon/pill for family events
    - `.events-search-box`: styled input matching hub aesthetic
    - `.events-chip`: filter chip styling (active state)
    - Responsive: stack vertically on mobile, hide time column

    **Link from CSS:** Use the SAME design-pass CSS file (linked from events.html) so styling is consistent.

    **Do NOT:**
    - Load the full 40+ module JS stack — this is a lightweight standalone page
    - Include the map — this is a list-focused page
    - Use ES6 modules — inline IIFE or plain script
    - Build a calendar grid view — the user said "list view, calendar grid" but for the demo a rich list view grouped by date IS the calendar view. A literal grid calendar can be added later.
  </action>
  <verify>
    Open events.html in a browser. Verify:
    1. All 176 events appear grouped by date
    2. Source badges show with distinct colors per source
    3. Text search filters events in real-time
    4. Date chips (Today, Weekend, etc.) filter correctly for Pacific timezone
    5. Family toggle shows only family-tagged events
    6. Header matches hub styling with "Back to Explore" link
    7. Page loads in under 2 seconds (no heavy dependencies)
  </verify>
  <done>events.html displays all 176 events in a date-grouped list with text search, date range chips, source filtering, and family toggle. Source badges prove multi-source aggregation visually.</done>
</task>

<task type="auto">
  <name>Task 2: Create dedicated itineraries sub-page and wire hub navigation to both sub-pages</name>
  <files>
    website/cultural-map-redesign-stitch-lab/itineraries.html
    website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.html
    website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.css
  </files>
  <action>
    **Create `itineraries.html` — a standalone page for browsing and comparing all itineraries side-by-side.**

    **HTML structure:**
    ```
    header.mast (matching hub, with "Back to Explore" link)
    main
      h1: "Trip Itineraries"
      p: "Curated multi-day plans for exploring Nevada County's cultural district"
      .itinerary-comparison (CSS grid: 3 columns on desktop, 1 on mobile)
        For each itinerary:
          .itinerary-compare-card
            h2: itinerary title
            .itinerary-meta: duration, stop count, towns covered
            .itinerary-stops-preview: first 3-4 stop names as pills/tags
            .itinerary-description: 2-3 sentence summary
            a.itinerary-cta: "Open full itinerary" → links to hub with ?itinerary=<id>
    footer.colophon (matching hub)
    ```

    **Inline JS:**
    1. Fetch `itineraries.json`
    2. For each itinerary, render a comparison card with:
       - Title, duration (X days), total stops count
       - Towns covered (extract unique cities from stops)
       - First 3-4 stop names as preview tags
       - Brief theme/description from the itinerary's `description` or `theme` field
       - CTA button linking to hub: `index-maplibre-hero-intent-stitch-frontend-design-pass.html?itinerary=<id>`

    3. Comparison layout: 3-column grid on desktop so all itineraries are visible simultaneously for comparison. Single column on mobile with cards stacking vertically.

    **CSS:** Add to design-pass CSS:
    - `.itinerary-page` root scoping class
    - `.itinerary-comparison`: CSS grid, 3 columns at >900px, 1 column below
    - `.itinerary-compare-card`: card styling matching hub aesthetic (cream background, subtle border, hover shadow)
    - `.itinerary-meta`: small caps metadata row
    - `.itinerary-stop-tag`: small pill showing stop name
    - `.itinerary-cta`: gold button matching hub gold (#c8943e)

    **Update hub navigation:**

    1. In the hub HTML header (`.stitch-top-nav`), add navigation links:
       - `<a href="events.html">Events</a>`
       - `<a href="itineraries.html">Itineraries</a>`

    2. In the events section on the hub, add a "See all events →" link pointing to `events.html`

    3. In the itinerary hero section on the hub, add a "Compare all itineraries →" link pointing to `itineraries.html`

    **Do NOT:**
    - Include the map on the itineraries page — map interaction is on the hub via deep link
    - Load the full JS module stack
    - Duplicate itinerary detail overlay logic — the sub-page previews, the hub provides the full experience
  </action>
  <verify>
    1. Open itineraries.html: 3 itinerary cards appear side-by-side on desktop
    2. Each card shows title, duration, stop count, town names, and stop preview tags
    3. Clicking "Open full itinerary" navigates to hub with correct ?itinerary= deep link
    4. Open hub HTML: nav bar shows Events and Itineraries links
    5. Events section shows "See all events" link to events.html
    6. Itinerary section shows "Compare all itineraries" link to itineraries.html
    7. Resize to mobile: itinerary cards stack vertically
  </verify>
  <done>itineraries.html shows 3 itineraries side-by-side for comparison with CTA links to hub deep links. Hub nav updated with links to both sub-pages. All navigation flows work bidirectionally.</done>
</task>

</tasks>

<verification>
1. Hub nav includes links to Events and Itineraries sub-pages
2. events.html loads 176 events in date-grouped list with 5 filter dimensions
3. itineraries.html shows 3 itineraries side-by-side with comparison cards
4. Sub-pages share consistent header/footer styling with hub
5. Sub-pages have "Back to Explore" navigation to return to hub
6. Deep links from itineraries.html CTAs correctly open itineraries on hub
7. All pages render correctly on mobile (single-column)
</verification>

<success_criteria>
- Two dedicated sub-pages exist and are navigable from the hub
- Events page provides richer filtering than the hub's events carousel
- Itineraries page enables side-by-side comparison of all 3 trip plans
- Navigation flows bidirectionally between hub and sub-pages
- All pages share consistent visual language
</success_criteria>

<output>
After completion, create `.planning/phases/03.1-content-architecture-demo-curation/03.1-02-SUMMARY.md`
</output>
