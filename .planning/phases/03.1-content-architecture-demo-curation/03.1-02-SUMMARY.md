---
phase: 03.1-content-architecture-demo-curation
plan: 02
subsystem: ui
tags: [sub-pages, events-calendar, itineraries, navigation, luxon, filtering]

requires:
  - phase: 03.1-content-architecture-demo-curation
    provides: Adaptive split layout, design-pass CSS, hub HTML structure
  - phase: 02.1-kvmr-gvda-event-source-ingestion
    provides: 5-source merged event data (events-merged-flat.json)
  - phase: 03-itineraries
    provides: itineraries.json with 3 curated trip plans

provides:
  - Dedicated events sub-page with full calendar list view and 5 filter dimensions
  - Dedicated itineraries sub-page with 3-column comparison grid
  - Hub-to-sub-page navigation links (Events, Itineraries in nav bar)
  - Bidirectional navigation between hub and sub-pages
  - Sub-page shared styling (header, footer, typography)

affects: [04-copy-positioning, deployment]

tech-stack:
  added: [luxon-cdn]
  patterns: [standalone-subpage, shared-css-subpage, hub-subpage-navigation]

key-files:
  created:
    - website/cultural-map-redesign-stitch-lab/events.html
    - website/cultural-map-redesign-stitch-lab/itineraries.html
  modified:
    - website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.html
    - website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.css

key-decisions:
  - "Sub-pages are separate HTML files with inline JS (no module loading from hub)"
  - "Events page uses Luxon CDN for Pacific timezone date handling"
  - "Source badges reuse same color scheme as hub: KVMR=teal, GVDA=rust, LibCal=blue, Trumba=gold, CivicEngage=green"
  - "Itinerary comparison uses CSS grid 3-column layout with deep link CTAs to hub"
  - "Sub-pages share design-pass CSS for visual consistency"

patterns-established:
  - "Standalone sub-page pattern: lightweight HTML with inline IIFE JS, shared CSS, matching header/footer"
  - "Hub-subpage-link pattern: centered link below content sections directing to dedicated sub-pages"

duration: 3min
completed: 2026-02-16
---

# Phase 03.1 Plan 02: Sub-Pages Summary

**Dedicated events calendar (176 events, 5 filter dimensions) and itineraries comparison page (3-column grid with deep link CTAs) with bidirectional hub navigation**

## Performance

- **Duration:** 3 min
- **Started:** 2026-02-16T05:34:36Z
- **Completed:** 2026-02-16T05:38:00Z
- **Tasks:** 2
- **Files modified:** 4

## Accomplishments

- Events sub-page with date-grouped list view, text search, date range chips, source dropdown, and family toggle
- Itineraries sub-page with 3-column comparison grid showing duration, stop count, preview tags, and CTA deep links
- Hub navigation updated: Events + Itineraries links in nav bar, contextual links in events and itinerary sections
- All sub-pages share consistent header/footer styling with hub via shared CSS

## Task Commits

Each task was committed atomically:

1. **Task 1: Create dedicated events sub-page with full calendar list view and rich filtering** - `f5b9737` (feat)
2. **Task 2: Create dedicated itineraries sub-page and wire hub navigation to both sub-pages** - `85bf7dc` (feat)

## Files Created/Modified

- `website/cultural-map-redesign-stitch-lab/events.html` - Standalone events page: fetches events-merged-flat.json, renders date-grouped list with 5 filter dimensions
- `website/cultural-map-redesign-stitch-lab/itineraries.html` - Standalone itineraries page: fetches itineraries.json, renders 3-column comparison grid with deep link CTAs
- `website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.html` - Added Events + Itineraries nav links, "See all events" and "Compare all itineraries" contextual links
- `website/cultural-map-redesign-stitch-lab/index-maplibre-hero-intent-stitch-frontend-design-pass.css` - Added sub-page shared styles, events page styles, itineraries page styles, hub-subpage-link styles

## Decisions Made

- **Separate HTML files (not routes):** Vanilla JS project has no router. Separate HTML files are the natural pattern for sub-pages, each with its own inline IIFE script.
- **Luxon from CDN for events page:** Events page needs timezone-aware date handling but doesn't load the hub's full module stack. Luxon loaded directly from CDN.
- **Source filter uses source_label:** Events don't have unified categories, so source_label (KVMR, GVDA, LibCal, Trumba, CivicEngage) serves as the category dimension.
- **Itinerary CTAs deep link to hub:** "Open full itinerary" links use `?itinerary=<id>` query param to activate the itinerary overlay on the hub page.
- **No town data in itineraries.json stops:** The `extractTowns` function checks for `stop.city` but the current JSON doesn't include city per stop. Towns display is graceful -- shows nothing if empty.

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered

None.

## User Setup Required

None - no external service configuration required.

## Next Phase Readiness

- Both sub-pages ready for deployment to stitch-lab Vercel
- Phase 03.1 complete: hub has adaptive layout, curated picks, events sub-page, itineraries sub-page
- Committee demo on Wed Feb 18 can showcase full content depth
- Future enhancement: itinerary stops could include city field for richer comparison cards

---
*Phase: 03.1-content-architecture-demo-curation*
*Completed: 2026-02-16*
